name = "ensenia-ai-search"
main = "src/index.ts"
compatibility_date = "2024-01-15"
compatibility_flags = ["nodejs_compat"]

# Account ID - replace with your actual account ID when deploying
account_id = "88a509aab23f4ae093a86539d7d228bb"

# Workers AI Binding
[ai]
binding = "AI"

# D1 Database Binding
[[d1_databases]]
binding = "DB"
database_name = "ensenia-curriculum"
database_id = "88a29e1f-593f-47ba-a557-9a8493e32fe2"

# Vectorize Binding
[[vectorize]]
binding = "VECTOR_INDEX"
index_name = "curriculum-embeddings"

# KV Namespace for Caching
[[kv_namespaces]]
binding = "SEARCH_CACHE"
id = "da0ef0a0bd7943818fd185272bc5ff3d"
preview_id = "da0ef0a0bd7943818fd185272bc5ff3d"

# Environment Variables
[vars]
ENVIRONMENT = "development"
EMBEDDING_MODEL = "@cf/baai/bge-base-en-v1.5"
GENERATION_MODEL = "@cf/meta/llama-3.1-8b-instruct"
VECTOR_DIMENSION = "768"
CACHE_TTL_HOT = "3600"      # 1 hour for frequent queries
CACHE_TTL_WARM = "86400"    # 24 hours for regular content
CACHE_TTL_COLD = "604800"   # 7 days for static data

# Development Configuration
[env.development]
vars = { ENVIRONMENT = "development", DEBUG = "true" }

# Production Configuration
[env.production]
vars = { ENVIRONMENT = "production", DEBUG = "false" }
